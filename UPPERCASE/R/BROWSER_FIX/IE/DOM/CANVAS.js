OVERRIDE({origin:CANVAS,func:function(origin){"use strict";global.CANVAS=CLASS({preset:function(){return origin},init:function(cls,inner,self){var exportImgData;self.exportImgData=exportImgData=function(params,callback){var img=params.img,evt=EVENT({node:img,name:"load"},function(e){var width=params.width===undefined?img.getWidth():params.width,height=params.height===undefined?img.getHeight():params.height,context;context=self.getContext();self.addStyle({position:"absolute",left:-999999,top:-999999});self.setSize({width:width,height:height});self.appendTo(BODY);self.getEl().onload=function(img){context.drawImg({img:{getEl:function(){return img}}});context.exportImgData({width:width,height:height},callback)};self.getEl().loadImages(img.getSrc());evt.remove()})}}})}});